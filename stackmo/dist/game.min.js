!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s=18)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"Vastgame",function(){return g});var i=n(12),r=n(2),o=n(4),a=n(13),s=n(14),c=n(7),u=n(8);n.d(e,"Actor",function(){return u.a}),n.d(e,"ActorInstance",function(){return u.b});var l=n(17);n.d(e,"Boundary",function(){return l.a}),n.d(e,"Enum",function(){return r}),n.d(e,"Input",function(){return o.a});var f=n(9);n.d(e,"Grid",function(){return f.a}),n.d(e,"GridCell",function(){return f.b}),n.d(e,"Room",function(){return c.a});var h=n(5);n.d(e,"Sprite",function(){return h.a}),n.d(e,"SpriteTransformation",function(){return h.c});var d=n(10);n.d(e,"View",function(){return d.a});var p=function(){function t(){}return t.prototype.init=function(t,e){o.a.init();var n=document.getElementById(t),r=new i.a(n);r.init(e.canvas),this.context=new a.a(r),this.runner=new s.a(e)},t.prototype.getContext=function(){return this.context},t.prototype.start=function(t){this.setRoom(t),this.runner.start(this.context)},t.prototype.setRoom=function(t,e){var n=c.a.get(t),i=this.context.getCurrentRoom();i&&i.end(),this.context.setCurrentRoom(n),n.hasStart&&n.callStart(e)},t}(),g=function(){function t(){}return t.init=function(t,e){this.game.init(t,e)},t.start=function(t){return this.game.start(t),this.game},t.getContext=function(){return this.game.getContext()},t.setRoom=function(t,e){this.game.setRoom(t,e)},t.game=new p,t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"Settings",function(){return i}),n.d(e,"ActorID",function(){return r}),n.d(e,"RoomID",function(){return o}),n.d(e,"SpriteID",function(){return a}),n.d(e,"GameAction",function(){return s}),n.d(e,"LevelBgColor",function(){return c});var i;!function(t){t.CanvasWidth="CanvasWidth",t.CanvasHeight="CanvasHeight",t.StackmoProgress="StackmoProgress"}(i||(i={}));var r;!function(t){t.ExitButton="BackButton",t.Block="Block",t.LevelIcon="LevelIcon",t.Player="Player",t.ScrollArrow="ScrollArrow",t.Title="Title",t.Wall="Wall",t.Win="Win"}(r||(r={}));var o;!function(t){t.Title="Title",t.LevelSelect="LevelSelect",t.Level="Level"}(o||(o={}));var a;!function(t){t.Arrows="Arrows",t.Digits="Digits",t.DoorSheet="DoorSheet",t.Box="Box",t.LevelIcon="LevelIcon",t.StackmoSheet="StackmoSheet",t.TextSheet="TextSheet",t.Title="Title",t.Wall="Wall",t.X="X"}(a||(a={}));var s;!function(t){t.Drop="Drop",t.Fall="Fall",t.Jump="Jump",t.Lift="Lift",t.Move="Move",t.CheckStopMoving="CheckStopMoving",t.Stop="Stop",t.Win="Win"}(s||(s={}));var c;!function(t){t.DarkTeal="#001820",t.Teal="#006070"}(c||(c={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"ActorState",function(){return i}),n.d(e,"Direction",function(){return r}),n.d(e,"GameState",function(){return o}),n.d(e,"Key",function(){return a});var i;!function(t){t[t.Active=1]="Active",t[t.Destroyed=2]="Destroyed"}(i||(i={}));var r;!function(t){t[t.Right=0]="Right",t[t.Down=90]="Down",t[t.Left=180]="Left",t[t.Up=270]="Up"}(r||(r={}));var o;!function(t){t[t.Running=1]="Running",t[t.Paused=2]="Paused"}(o||(o={}));var a;!function(t){t[t.Any=-1]="Any",t[t.Space=32]="Space",t[t.Left=37]="Left",t[t.Up=38]="Up",t[t.Right=39]="Right",t[t.Down=40]="Down"}(a||(a={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"Black",function(){return i}),n.d(e,"CanvasMaxWidth",function(){return r}),n.d(e,"CanvasMaxHeight",function(){return o}),n.d(e,"GridCellSize",function(){return a}),n.d(e,"BlockFallSpeed",function(){return s}),n.d(e,"PlayerMoveSpeed",function(){return c}),n.d(e,"PlayerJumpSpeed",function(){return u}),n.d(e,"PlayerFallSpeed",function(){return l});var i="#000",r=1024,o=768,a=64,s=8,c=4,u=8,l=8},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n(2),r=function(){function t(){}return Object.defineProperty(t,"clickActive",{get:function(){return!!t._activePointerEvent},enumerable:!0,configurable:!0}),t.init=function(){var e=this,n=function(e){t._activePointerEvent||(t._activePointerEvent=e,t.clickHandlers.length&&t.clickHandlers.forEach(function(t){t.isAlive&&t.callback(e)}))},r=function(){t._activePointerEvent=null};document.body.onmousedown=function(t){n(a.fromMouseEvent(t))},document.body.ontouchstart=function(t){document.body.onmousedown=null,n(a.fromTouchEvent(t))},document.body.onmouseup=r,document.body.ontouchend=r,document.body.onkeydown=function(t){var n=t.keyCode||t.code,r=e.keyboardHandlers[n];r&&r.isAlive&&!e.keyboardActivity[n]&&(e.keyboardActivity[n]=!0,r.callback(t));var o=e.keyboardHandlers[i.Key.Any];o&&o.isAlive&&!e.keyboardActivity[i.Key.Any]&&(e.keyboardActivity[i.Key.Any]=!0,o.callback(t))},document.body.onkeyup=function(t){var n=t.keyCode||t.code,r=e.keyboardHandlers[n];e.keyboardActivity[i.Key.Any]=!1,r&&r.isAlive&&(e.keyboardActivity[n]=!1)}},t.registerClickHandler=function(e){var n=new o(e);return t.clickHandlers.push(n),n},t.registerKeyHandler=function(e,n){var i=new o(n);return t.keyboardHandlers[e]=i,i},t.keyDown=function(t){return!!this.keyboardActivity[t]},t.clickHandlers=[],t.keyboardHandlers={},t.keyboardActivity={},t._activePointerEvent=null,t}(),o=function(){function t(t){this.callback=t,this.isAlive=!0}return t.prototype.dispose=function(){this.isAlive=!1},t}(),a=function(){function t(){}return t.fromMouseEvent=function(t){return{x:t.offsetX,y:t.offsetY}},t.fromTouchEvent=function(t){var e=t.touches[0];return{x:e?e.clientX:0,y:e?e.clientY:0}},t}()},function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return a});var i,r=n(0);!function(t){t[t.Opacity=0]="Opacity"}(i||(i={}));var o=function(){function t(t){this.transformatons={},this.image=new Image,this.image.src=t.imageSource,this.height=t.height,this.width=t.width,this.frameBorder=t.frameBorder,this.setDefaultTransforms()}return t.define=function(e,n){var i=new t(n);return r.Vastgame.getContext().defineSprite(e,i),i},t.get=function(t){return r.Vastgame.getContext().getSprite(t)},t.prototype.setDefaultTransforms=function(){this.transformatons[i.Opacity]=1},t.prototype.getTransform=function(t){return this.transformatons[t]},t.prototype.transform=function(t,e){this.transformatons[t]+=e},t.prototype.setTransform=function(t,e){this.transformatons[t]=e},t}(),a=function(){function t(t){this.sprite=t,this.current=0,this.depth=0,this.current=0}return Object.defineProperty(t.prototype,"frame",{get:function(){return this.current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"source",{get:function(){return this.sprite},enumerable:!0,configurable:!0}),t.prototype.start=function(t,e,n){var i=this;this.stop(),this.current=t,this.timer=setInterval(function(){i.current=i.current===e?t:i.current+1},n)},t.prototype.stop=function(){this.timer&&clearInterval(this.timer)},t.prototype.set=function(t){this.stop(),this.current=t},t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"Registry",function(){return i});var i=function(){function t(){}return t.get=function(t){return this.values[t]},t.load=function(t){return this.values[t]=localStorage.getItem(t),this.values[t]},t.set=function(t,e,n){void 0===n&&(n=!1),this.values[t]=e,n&&localStorage.setItem(t,e)},t.values={},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var i=n(8),r=n(4),o=n(9),a=n(10),s=n(0),c=function(){return function(t,e,n,i){void 0===e&&(e="#000"),this.color=t,this.pageColor=e,this.width=n,this.height=i}}(),u=function(){function t(){this.actorInstanceMap={},this.eventHandlers=[]}return t.define=function(e){var n=new t;return s.Vastgame.getContext().defineRoom(e,n),n},t.get=function(t){return s.Vastgame.getContext().getRoom(t)},Object.defineProperty(t.prototype,"hasStart",{get:function(){return!!this.onStartCallback},enumerable:!0,configurable:!0}),t.prototype.onStart=function(t){this.onStartCallback=t},t.prototype.callStart=function(t){this.onStartCallback(t)},Object.defineProperty(t.prototype,"hasDraw",{get:function(){return!!this.onDrawCallback},enumerable:!0,configurable:!0}),t.prototype.onDraw=function(t){this.onDrawCallback=t},t.prototype.callDraw=function(){this.onDrawCallback(this)},t.prototype.onClick=function(t){var e=r.a.registerClickHandler(t);this.eventHandlers.push(e)},t.prototype.onKey=function(t,e){var n=r.a.registerKeyHandler(t,e);this.eventHandlers.push(n)},t.prototype.defineGrid=function(t){return this.grid=new o.a(t,this),this.grid},t.prototype.defineView=function(t,e,n,i){return this.view=new a.a(t,e,n,i),this.view},t.prototype.setBackground=function(t,e,n,i){this.background=new c(t,i,e,n),i&&(document.body.style.backgroundColor=i)},t.prototype.step=function(){var t=this;this.getInstances().forEach(function(e){var n=e.parent;e.isActive?(0!==e.speed&&t.applyInstanceMovement(e),t.checkCollisions(e),n.step(e)):t.destroyActorInstance(e)}),this.view&&this.view.update()},t.prototype.applyInstanceMovement=function(t){var e=Math.round(t.getMovementOffsetX()),n=Math.round(t.getMovementOffsetY());0===e&&0===n||t.setPositionRelative(e,n)},t.prototype.checkCollisions=function(t){var e=t.parent;for(var n in e.collisionHandlers){var r=e.collisionHandlers[n],o=i.a.get(n);for(var a in this.actorInstanceMap){var s=this.actorInstanceMap[a];s.parent===o&&t!==s&&t.collidesWith(s)&&r(t,s)}}},t.prototype.draw=function(t){var e=this.getViewOffset(),n=e[0],i=e[1];this.background&&t.fill(-n,-i,this.background.width,this.background.height,this.background.color),this.hasDraw&&this.callDraw(),this.getInstances().sort(function(t,e){return(e.spriteAnimation?e.spriteAnimation.depth:0)-(t.spriteAnimation?t.animation.depth:0)}).forEach(function(e){e.parent.hasDraw&&e.parent.callDraw(e),e.animation&&e.visible&&t.drawSprite(e.animation.source,e.x-n,e.y-i,e.spriteAnimation.frame)})},t.prototype.drawSprite=function(t,e,n,i){void 0===i&&(i=0);var r=this.getViewOffset(),o=r[0],a=r[1];s.Vastgame.getContext().getCanvas().getContext().drawSprite(t,e-o,n-a,i)},t.prototype.createActor=function(e,n,r){var o=i.a.get(e),a=t.nextActorInstanceID(),s=new i.b(this,o,a,n,r);return this.actorInstanceMap[a]=s,o.hasCreate&&o.callCreate(s),s},t.prototype.destroyActorInstance=function(t){var e=t.parent;e.hasDestroy&&e.callDestroy(t),delete this.actorInstanceMap[t.id]},t.prototype.getViewOffset=function(){return[this.view?this.view.x:0,this.view?this.view.y:0]},t.prototype.getInstances=function(){var t=[];for(var e in this.actorInstanceMap)t.push(this.actorInstanceMap[e]);return t},t.prototype.getInstancesAtPosition=function(t,e){return this.getInstances().filter(function(n){return n.occupiesPosition(t,e)})},t.prototype.isPositionFree=function(t,e){return!this.getInstancesAtPosition(t,e).length},t.prototype.getView=function(){return this.view},t.prototype.handleClick=function(t){var e=t.x,n=t.y;this.view&&(e+=this.view.x,n+=this.view.y),this.grid&&this.grid.raiseClickEvent(e,n),this.getInstancesAtPosition(e,n).forEach(function(i){var r=i.parent;r.hasClick&&i.occupiesPosition(e,n)&&r.callClick(i,t)})},t.prototype.end=function(){this.actorInstanceMap={},this.eventHandlers.forEach(function(t){return t.dispose()})},t.nextActorInstanceID=function(){var t=0;return function(){return++t}}(),t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return c}),n.d(e,"b",function(){return u});var i=n(2),r=n(15),o=n(5),a=n(16),s=n(0),c=function(){function t(t,e){void 0===e&&(e={}),this.collisionHandlers={},this.actorEventHandlers={},this.boundary=e.boundary,this.name=t,this.sprite=e.sprite}return t.define=function(e,n){var i=new t(e,n);return s.Vastgame.getContext().defineActor(e,i),i},t.get=function(t){return s.Vastgame.getContext().getActor(t)},Object.defineProperty(t.prototype,"hasCreate",{get:function(){return!!this.onCreateCallback},enumerable:!0,configurable:!0}),t.prototype.onCreate=function(t){this.onCreateCallback=t},t.prototype.callCreate=function(t){this.onCreateCallback(t)},t.prototype.step=function(t){this.hasStep&&this.callStep(t),t.previousX=t.x,t.previousY=t.y},Object.defineProperty(t.prototype,"hasStep",{get:function(){return!!this.onStepCallback},enumerable:!0,configurable:!0}),t.prototype.onStep=function(t){this.onStepCallback=t},t.prototype.callStep=function(t){this.onStepCallback(t)},Object.defineProperty(t.prototype,"hasDraw",{get:function(){return!!this.onDrawCallback},enumerable:!0,configurable:!0}),t.prototype.onDraw=function(t){this.onDrawCallback=t},t.prototype.callDraw=function(t){this.onDrawCallback(t)},Object.defineProperty(t.prototype,"hasClick",{get:function(){return!!this.onClickCallback},enumerable:!0,configurable:!0}),t.prototype.onClick=function(t){this.onClickCallback=t},t.prototype.callClick=function(t,e){this.onClickCallback(t,e)},t.prototype.onCollide=function(t,e){this.collisionHandlers[t]=e},t.prototype.onEvent=function(t,e){this.actorEventHandlers[t]=e},Object.defineProperty(t.prototype,"hasDestroy",{get:function(){return!!this.onDestroyCallback},enumerable:!0,configurable:!0}),t.prototype.onDestroy=function(t){this.onDestroyCallback=t},t.prototype.callDestroy=function(t){this.onDestroyCallback(t)},t}(),u=function(){function t(t,e,n,r,a){void 0===r&&(r=0),void 0===a&&(a=0),this.room=t,this.parent=e,this.id=n,this.x=r,this.y=a,this.speed=0,this.direction=i.Direction.Right,this.visible=!0,this.state=i.ActorState.Active,this.previousX=this.x,this.previousY=this.y,this.parent.sprite&&(this.spriteAnimation=new o.b(this.parent.sprite))}return Object.defineProperty(t.prototype,"hasMoved",{get:function(){return this.x!==this.previousX||this.y!==this.previousY},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isActive",{get:function(){return this.state===i.ActorState.Active},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boundary",{get:function(){return this.parent.boundary},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"animation",{get:function(){return this.spriteAnimation},enumerable:!0,configurable:!0}),t.prototype.drawSprite=function(t,e,n,i){void 0===i&&(i=0),this.room.drawSprite(t,e,n,i)},t.prototype.raiseEvent=function(t,e){this.raiseEventWhen(t,function(){return!0},e)},t.prototype.raiseEventWhen=function(t,e,n){void 0===n&&(n={}),this.setGameContextEventArgs(n);var i=this.parent.actorEventHandlers[t];if(!i)throw new Error("Attempting to raise undefined Event: "+t);r.a.register(new r.a(e,i.bind(null,this,n)))},t.prototype.setGameContextEventArgs=function(t){t.game={currentRoom:s.Vastgame.getContext().getCurrentRoom()}},t.prototype.destroy=function(){this.state=i.ActorState.Destroyed},t.prototype.collidesWith=function(t){return!!(this.hasMoved&&this.boundary&&t.boundary)&&this.boundary.atPosition(this.x,this.y).collidesWith(t.boundary.atPosition(t.x,t.y))},t.prototype.getMovementOffsetX=function(){return a.a.getLengthDirectionX(100*this.speed,this.direction)/100},t.prototype.getMovementOffsetY=function(){return a.a.getLengthDirectionY(100*this.speed,this.direction)/100},t.prototype.setPositionRelative=function(t,e){this.setPosition(this.x+t,this.y+e)},t.prototype.setPosition=function(t,e){this.previousX=this.x,this.previousY=this.y,this.x=t,this.y=e},t.prototype.move=function(t,e){this.speed=t,this.direction=e},t.prototype.occupiesPosition=function(t,e){return!!this.boundary&&this.boundary.atPosition(this.x,this.y).containsPosition(t,e)},t}()},function(t,e,n){"use strict";n.d(e,"b",function(){return o}),n.d(e,"a",function(){return a});var i=n(2),r=function(){function t(t,e,n){this.grid=t,this.x=e,this.y=n}return t.prototype.getCell=function(){var t=this.x-this.x%this.grid.tileSize,e=this.y-this.y%this.grid.tileSize;return new o(this.grid,t,e)},t}(),o=function(){function t(t,e,n){this.grid=t,this.x=e,this.y=n}return t.prototype.getAdjacentCell=function(e){var n=0,r=0;switch(e){case i.Direction.Down:r=this.grid.tileSize;break;case i.Direction.Left:n=-this.grid.tileSize;break;case i.Direction.Right:n=this.grid.tileSize;break;case i.Direction.Up:r=-this.grid.tileSize}return new t(this.grid,this.x+n,this.y+r)},t.prototype.getContents=function(){return this.grid.room.getInstancesAtPosition(this.x+this.grid.tileSize/2,this.y+this.grid.tileSize/2)},t.prototype.containsInstance=function(t){return this.getContents().some(function(e){return e===t})},t.prototype.containsInstanceOf=function(t){return this.getContents().some(function(e){return e.parent===t})},t.prototype.isFree=function(){return!this.getContents().length},t}(),a=function(){function t(t,e){this.tileSize=t,this.room=e}return t.prototype.onClick=function(t){this._onClick=t},t.prototype.raiseClickEvent=function(t,e){this.room.getInstancesAtPosition(t,e);var n=new r(this,t,e);this._onClick(n)},t.prototype.getCellAtPosition=function(t,e){return new o(this,t,e)},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i;!function(t){t[t.SamePosition=1]="SamePosition",t[t.Center=2]="Center"}(i||(i={}));var r=function(){function t(t,e,n,i){this.x=t,this.y=e,this.width=n,this.height=i,this.attachments=[]}return t.prototype.follow=function(t,e){void 0===e&&(e=!1),this.viewMode=e?i.Center:i.SamePosition,this.followInstance=t},t.prototype.attach=function(t,e,n){this.attachments.push(new o(this,t,e,n))},t.prototype.update=function(){this.followInstance&&(this.viewMode===i.Center?this.centerAroundBoundary(this.followInstance.boundary):(this.x=this.followInstance.x||0,this.y=this.followInstance.y||0),this.attachments.forEach(function(t){return t.update()}))},t.prototype.centerAroundBoundary=function(t){if(!t)throw new Error("boundary is "+t);this.x=this.followInstance.x+t.width/2-this.width/2,this.y=this.followInstance.y+t.height/2-this.height/2},t}(),o=function(){function t(t,e,n,i){this.parent=t,this.instance=e,this.offsetX=n,this.offsetY=i}return t.prototype.update=function(){this.instance.x=this.parent.x+this.offsetX,this.instance.y=this.parent.y+this.offsetY},t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"SpriteFader",function(){return r});var i=n(0),r=function(){function t(){}return t.fadeOut=function(t,e){var n=1,r=setInterval(function(){n-=.25,t.forEach(function(t){return t.transform(i.SpriteTransformation.Opacity,-.25)}),n<=0&&(clearInterval(r),setTimeout(e,200))},100)},t.fadeIn=function(t,e){var n=0;t.forEach(function(t){return t.setTransform(i.SpriteTransformation.Opacity,0)});var r=setInterval(function(){n+=.25,t.forEach(function(t){return t.transform(i.SpriteTransformation.Opacity,.25)}),n>=1&&(clearInterval(r),e&&setInterval(e,200))},100)},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n(5),r=function(){function t(t){this.canvasElement=t,this.gameCanvasContext=new o(this.canvasElement)}return t.prototype.getContext=function(){return this.gameCanvasContext},t.prototype.init=function(t){this.canvasElement&&(this.canvasElement.height=t.height,this.canvasElement.width=t.width)},t}(),o=function(){function t(t){this.canvasElement=t}return Object.defineProperty(t.prototype,"canvasContext2D",{get:function(){return this.canvasElement.getContext("2d")},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.canvasContext2D.clearRect(0,0,this.canvasElement.width,this.canvasElement.height)},t.prototype.fill=function(t,e,n,i,r){this.canvasContext2D.beginPath(),this.canvasContext2D.rect(t,e,n,i),this.canvasContext2D.fillStyle=r,this.canvasContext2D.fill()},t.prototype.drawSprite=function(t,e,n,r){void 0===r&&(r=0);var o=t.image,a=t.frameBorder||0,s=t.width,c=t.height,u=r*a,l=t.getTransform(i.c.Opacity),f=null;1!==l&&null!==l&&void 0!==l&&(f=this.canvasContext2D.globalAlpha,this.canvasContext2D.globalAlpha=l),this.canvasContext2D.drawImage(o,r*s+u,0,s,c,Math.floor(e),Math.floor(n),s,c),null!==f&&(this.canvasContext2D.globalAlpha=f)},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n(4),r=function(){function t(t){this.canvas=t,this.actors={},this.events={},this.rooms={},this.sprites={},this.nextEventID=function(){var t=0;return function(){return++t}}()}return t.prototype.getCanvas=function(){return this.canvas},t.prototype.defineActor=function(t,e){if(this.actors[t])throw new Error("Actor "+t+" has already been defined.");this.actors[t]=e},t.prototype.getActor=function(t){if(!this.actors[t])throw new Error("Actor "+t+" has not been defined.");return this.actors[t]},t.prototype.registerEvent=function(t){this.events[this.nextEventID()]=t},t.prototype.checkAndFireEvents=function(){for(var t in this.events){var e=this.events[t];e.conditionCallback()&&(e.actionCallback(),e.fireOnce&&delete this.events[t])}},t.prototype.defineRoom=function(t,e){if(this.rooms[t])throw new Error("Room "+t+" has already been defined.");this.rooms[t]=e},t.prototype.getRoom=function(t){if(!this.rooms[t])throw new Error("Room "+t+" has not been defined.");return this.rooms[t]},t.prototype.getCurrentRoom=function(){return this.currentRoom},t.prototype.setCurrentRoom=function(t){this.currentRoom=t,i.a.registerClickHandler(function(e){return t.handleClick(e)})},t.prototype.defineSprite=function(t,e){if(this.sprites[t])throw new Error("Sprite "+t+" has already been defined.");this.sprites[t]=e},t.prototype.getSprite=function(t){if(!this.sprites[t])throw new Error("Sprite "+t+" has not been defined.");return this.sprites[t]},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n(2),r=60,o=function(){function t(t){this.options=t,this.state=i.GameState.Paused,this.targetFPS=t.targetFPS||r}return Object.defineProperty(t.prototype,"isRunning",{get:function(){return this.state===i.GameState.Running},enumerable:!0,configurable:!0}),t.prototype.pause=function(){this.state=i.GameState.Paused},t.prototype.start=function(t){var e=this,n=1/this.targetFPS,r=0,o=window.performance.now(),a=t.getCanvas().getContext(),s=function(){var i=t.getCurrentRoom(),c=window.performance.now();for(r+=Math.min(1,(c-o)/1e3);r>n;){if(!e.isRunning)return;t.checkAndFireEvents(),i.step(),r-=n}e.isRunning&&(a.clear(),i.draw(a)),o=c,requestAnimationFrame(s)};this.state=i.GameState.Running,requestAnimationFrame(s)},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n(0),r=function(){function t(t,e,n){void 0===n&&(n=!0),this.conditionCallback=t,this.actionCallback=e,this.fireOnce=n}return t.register=function(t){i.Vastgame.getContext().registerEvent(t)},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(){function t(){}return t.getLengthDirectionX=function(t,e){return t*Math.cos(e*(Math.PI/180))},t.getLengthDirectionY=function(t,e){return t*Math.sin(e*(Math.PI/180))},t}()},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=function(){function t(t,e,n){this.x=t,this.y=e,this.height=n.height,this.width=n.width}return t.prototype.collidesWith=function(t){return!(this.x>t.x+t.width||t.x>=this.x+this.width)&&!(this.y>t.y+t.height||t.y>=this.y+this.height)},t.prototype.containsPosition=function(t,e){return!(this.x>t||t>this.x+this.width)&&!(this.y>e||e>this.y+this.height)},t}(),r=function(){function t(t,e,n){if(void 0===n&&(n=!1),this.height=t,this.width=e,this.solid=n,t<=0||e<=0)throw new Error("Height and width must both be greater than zero.")}return t.fromSprite=function(e,n){return void 0===n&&(n=!1),new t(e.height,e.width,n)},t.prototype.atPosition=function(t,e){return new i(t,e,this)},t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(1),o=n(19),a=Object(o.buildCanvasDimensions)(),s=a[0],c=a[1];o.Registry.set(r.Settings.CanvasWidth,s),o.Registry.set(r.Settings.CanvasHeight,c),i.Vastgame.init("game",{canvas:{width:s,height:c}}),Object(o.requireModules)("actors",["block","hud","player","wall","win"]),Object(o.requireModules)("rooms",["level","level-select","title"]),o.Registry.set(r.Settings.StackmoProgress,1,!0),o.Registry.load(r.Settings.StackmoProgress),i.Vastgame.start(r.RoomID.Title)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.requireModules=function(t,e){e.forEach(function(e){return n(29)("./"+t+"/"+e)})},e.buildCanvasDimensions=function(){var t=window.innerWidth<i.CanvasMaxWidth,e=t?window.innerWidth:i.CanvasMaxWidth;e+=e%2==0?0:1;var n=t?window.innerHeight:i.CanvasMaxHeight;return n+=n%2==0?0:1,[e,n]};var i=n(3),r=n(6);n.d(e,"Registry",function(){return r.Registry})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"LevelBuilder",function(){return s}),n.d(e,"Levels",function(){return c});var i,r=n(0),o=n(1),a=n(3),s=function(){function t(){}return t.populateRoom=function(t,e){var n=a.GridCellSize,i=(r.Actor.get("Block"),r.Actor.get("Player"),r.Actor.get("Wall"),r.Actor.get("Win"),[]),s=c.get(e),u={0:[o.LevelBgColor.Teal,o.LevelBgColor.DarkTeal]};t.setBackground(u[0][0],s[0].length*n,s.length*n,u[0][1]);for(var l=0;l<s.length;l++)for(var f=s[l],h=0;h<f.length;h++)switch(f.charAt(h)){case"X":i.push(t.createActor(o.ActorID.Block,h*n,l*n));break;case"P":i.push(t.createActor(o.ActorID.Player,h*n,l*n));break;case"W":i.push(t.createActor(o.ActorID.Win,h*n,l*n));break;case"#":var d=t.createActor(o.ActorID.Wall,h*n,l*n),p=this.getWallFrame(s,l,h);d.spriteAnimation.set(p),i.push(d)}return i},t.getWallFrame=function(t,e,n){var r=t[0].length-1,o=t.length-1,a=e>0&&"#"!==t[e-1][n],s=e>0&&n>0&&"#"!==t[e-1][n-1],c=e>0&&n<r&&"#"!==t[e-1][n+1],u=e<o&&"#"!==t[e+1][n],l=e<o&&n>0&&"#"!==t[e+1][n-1],f=e<o&&n<r&&"#"!==t[e+1][n+1],h=n>0&&"#"!==t[e][n-1],d=n<r&&"#"!==t[e][n+1];if(!a){if(!h){if(!d){if(!u){if(!s){if(!c)return l?f?i.ThreewayBottom:i.InnerCornerTopRight:f?i.InnerCornerTopLeft:i.Inner;if(!l)return f?i.ThreewayRight:i.InnerCornerBottomLeft}return c||f?l||f?i.Fourway:i.ThreewayTop:l?i.ThreewayLeft:i.InnerCornerBottomRight}return s||c?i.ThreewayNarrowTop:i.FlatTop}if(!u)return s||l?i.ThreewayNarrowLeft:i.FlatLeft;if(!s)return i.OuterCornerBottomRight}if(!d){if(!u)return c||f?i.ThreewayNarrowRight:i.FlatRight;if(!c)return i.OuterCornerBottomLeft}return u?i.CappedBottom:i.NarrowVertical}return h?d?u?i.Solo:i.CappedTop:f||u?i.CappedLeft:i.OuterCornerTopLeft:d?l||u?i.CappedRight:i.OuterCornerTopRight:u?i.NarrowHorizontal:l||f?i.ThreewayNarrowBottom:i.FlatBottom},t}(),c=function(){function t(){}return Object.defineProperty(t,"count",{get:function(){var t=0;for(var e in this.levels)t++;return t},enumerable:!0,configurable:!0}),t.get=function(t){return this.levels[t]},t.levels={1:["##################","#                #","#       ##       #","#       ##       #","#XW              #","#####           X#","#######       P###","##########    ####","##########  ######","##################"],2:["##################","#    #      #    #","#   ##   #  ##   #","#P   #      #    #","##       #       #","#W      ###  #####","####     #       #","#                #","# XX X  #    XXWX#","##################"],3:["##################","#                #","#                #","#                #","#                #","#                #","# W       #      #","# XXX      #     #","# XXXX  P # #  XX#","##################"],4:["##################","#                #","#   #            #","#         #      #","#    #           #","#  #         XX  #","#           XXXXX#","#          XXXXXX#","#  P    XXXXXXXXX#","##################"],5:[],6:[],7:[],8:[],9:[],10:[],11:[],12:[],13:[],14:[],15:[],16:[],17:[],18:[],19:[],20:[],21:[],22:[],23:[],24:[],25:[],26:[],27:[],28:[],29:[],30:[],31:[],32:[]},t}();!function(t){t[t.InnerCornerTopLeft=0]="InnerCornerTopLeft",t[t.FlatTop=1]="FlatTop",t[t.InnerCornerTopRight=2]="InnerCornerTopRight",t[t.OuterCornerTopLeft=3]="OuterCornerTopLeft",t[t.OuterCornerBottomLeft=4]="OuterCornerBottomLeft",t[t.FlatLeft=5]="FlatLeft",t[t.Inner=6]="Inner",t[t.FlatRight=7]="FlatRight",t[t.OuterCornerTopRight=8]="OuterCornerTopRight",t[t.InnerCornerBottomLeft=9]="InnerCornerBottomLeft",t[t.FlatBottom=10]="FlatBottom",t[t.InnerCornerBottomRight=11]="InnerCornerBottomRight",t[t.OuterCornerBottomRight=12]="OuterCornerBottomRight",t[t.NarrowHorizontal=13]="NarrowHorizontal",t[t.NarrowVertical=14]="NarrowVertical",t[t.CappedLeft=15]="CappedLeft",t[t.CappedTop=16]="CappedTop",t[t.CappedRight=17]="CappedRight",t[t.CappedBottom=18]="CappedBottom",t[t.ThreewayNarrowTop=19]="ThreewayNarrowTop",t[t.ThreewayNarrowRight=20]="ThreewayNarrowRight",t[t.ThreewayNarrowBottom=21]="ThreewayNarrowBottom",t[t.ThreewayNarrowLeft=22]="ThreewayNarrowLeft",t[t.Fourway=23]="Fourway",t[t.Solo=24]="Solo",t[t.ThreewayTop=25]="ThreewayTop",t[t.ThreewayRight=26]="ThreewayRight",t[t.ThreewayBottom=27]="ThreewayBottom",t[t.ThreewayLeft=28]="ThreewayLeft"}(i||(i={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(3),o=n(1),a=i.Sprite.define(o.SpriteID.Box,{imageSource:"../resources/box.png",height:r.GridCellSize,width:r.GridCellSize}),s=i.Actor.define(o.ActorID.Block,{boundary:i.Boundary.fromSprite(a),sprite:a});s.onEvent(o.GameAction.Fall,function(t,e){if(e.game.currentRoom.isPositionFree(t.x+1,t.y+r.GridCellSize+1)){var n=t.y;e.targetCell=e.targetCell.getAdjacentCell(i.Enum.Direction.Down),t.move(r.BlockFallSpeed,i.Enum.Direction.Down),t.raiseEventWhen(o.GameAction.Stop,function(){return Math.abs(n-t.y)>=r.GridCellSize},e)}}),s.onEvent(o.GameAction.Stop,function(t,e){var n=e.game.currentRoom,i=e.targetCell;t.move(0),t.setPosition(i.x,i.y),n.isPositionFree(t.x+1,t.y+r.GridCellSize+1)&&t.raiseEvent(o.GameAction.Fall,e)})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(3),o=n(1),a=i.Sprite.define(o.SpriteID.X,{imageSource:"../resources/x.png",height:r.GridCellSize,width:r.GridCellSize});i.Actor.define(o.ActorID.ExitButton,{boundary:i.Boundary.fromSprite(a),sprite:a}).onClick(function(){return i.Vastgame.setRoom(o.RoomID.LevelSelect)})},function(t,e,n){"use strict";function i(t,e,n){void 0===n&&(n=!1);var i=f.StandRight;i=r?e===o.Enum.Direction.Right?f.StandHoldRight:f.StandHoldLeft:e===o.Enum.Direction.Right?f.StandRight:f.StandLeft,n?t.spriteAnimation.start(i+1,i+2,100):t.spriteAnimation.set(i)}Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(0),a=n(3),s=n(1),c=o.Sprite.define(s.SpriteID.StackmoSheet,{imageSource:"../resources/stackmo_sheet.png",height:a.GridCellSize,width:a.GridCellSize,frameBorder:4}),u=o.Actor.define(s.ActorID.Player,{boundary:o.Boundary.fromSprite(c),sprite:c}),l=o.Enum.Direction.Right;u.onCreate(function(t){t.animation.depth=-50,r=null}),u.onStep(function(t){r&&r.setPosition(t.x,t.y-a.GridCellSize)}),u.onEvent(s.GameAction.Move,function(t,e){var n=e.targetCell,c=e.direction,u=t.x;l=c,(!r||r&&n.getAdjacentCell(o.Enum.Direction.Up).isFree())&&(t.move(a.PlayerMoveSpeed,c),t.raiseEventWhen(s.GameAction.CheckStopMoving,function(){return Math.abs(u-t.x)>=a.GridCellSize},e),i(t,c,!0))}),u.onEvent(s.GameAction.CheckStopMoving,function(t,e){var n=e.targetCell,i=s.GameAction.Stop;if(t.move(0),t.setPosition(n.x,n.y),o.Input.clickActive||o.Input.keyDown(l===o.Enum.Direction.Left?o.Enum.Key.Left:o.Enum.Key.Right)){var r=n.getAdjacentCell(l),a=n.getAdjacentCell(o.Enum.Direction.Down);r.isFree()&&!a.isFree()&&(e.targetCell=r,i=s.GameAction.Move)}t.raiseEvent(i,e)}),u.onEvent(s.GameAction.Fall,function(t,e){var n=t.y,r=e.direction;e.targetCell=e.targetCell.getAdjacentCell(o.Enum.Direction.Down),t.move(a.PlayerFallSpeed,o.Enum.Direction.Down),t.raiseEventWhen(s.GameAction.Stop,function(){return Math.abs(n-t.y)>=a.GridCellSize},e),i(t,r,!1)}),u.onEvent(s.GameAction.Stop,function(t,e){var n=e.game.currentRoom,r=e.targetCell;t.move(0),t.setPosition(r.x,r.y),n.isPositionFree(t.x+1,t.y+a.GridCellSize+1)?t.raiseEvent(s.GameAction.Fall,e):i(t,l);var c=o.Actor.get(s.ActorID.Win);r.containsInstanceOf(c)&&n.getInstances().find(function(t){return t.parent===c}).raiseEvent(s.GameAction.Win)}),u.onEvent(s.GameAction.Jump,function(t,e){var n=e.targetCell,i=e.direction,c=t.y,u=n.getAdjacentCell(i===o.Enum.Direction.Right?o.Enum.Direction.Left:o.Enum.Direction.Right),l=r?u.getAdjacentCell(o.Enum.Direction.Up):null;if(l?l.isFree()&&l.getAdjacentCell(i).isFree():u.isFree()){t.move(a.PlayerJumpSpeed,o.Enum.Direction.Up),t.raiseEventWhen(s.GameAction.Move,function(){return Math.abs(c-t.y)>=a.GridCellSize},e)}}),u.onEvent(s.GameAction.Lift,function(t,e){var n=e.block,a=e.targetCell,c=l===o.Enum.Direction.Left?o.Enum.Direction.Right:o.Enum.Direction.Left,u=a.getAdjacentCell(o.Enum.Direction.Up),f=u.getAdjacentCell(c);(r||u.isFree()&&f.isFree())&&(r&&n===r?t.raiseEvent(s.GameAction.Drop,e):!r&&a.getAdjacentCell(c).containsInstance(t)&&(r=n,i(t,l)))}),u.onEvent(s.GameAction.Drop,function(t,e){var n=e.block,c=e.targetCell,u=l===o.Enum.Direction.Left?-a.GridCellSize:a.GridCellSize;c.getAdjacentCell(l).isFree()&&(e.targetCell=e.targetCell.getAdjacentCell(l),r=null,n.setPositionRelative(u,0),n.raiseEvent(s.GameAction.Fall,e),i(t,l))});var f;!function(t){t[t.StandLeft=0]="StandLeft",t[t.MoveLeft1=1]="MoveLeft1",t[t.MoveLeft2=2]="MoveLeft2",t[t.StandRight=3]="StandRight",t[t.MoveRight1=4]="MoveRight1",t[t.MoveRight2=5]="MoveRight2",t[t.StandHoldLeft=6]="StandHoldLeft",t[t.MoveHoldLeft1=7]="MoveHoldLeft1",t[t.MoveHoldLeft2=8]="MoveHoldLeft2",t[t.StandHoldRight=9]="StandHoldRight",t[t.MoveHoldRight1=10]="MoveHoldRight1",t[t.MoveHolddRight2=11]="MoveHolddRight2"}(f||(f={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(3),o=n(1),a=i.Sprite.define(o.SpriteID.Wall,{imageSource:"../resources/wall_sheet_teal.png",height:r.GridCellSize,width:r.GridCellSize,frameBorder:1});i.Actor.define(o.ActorID.Wall,{boundary:i.Boundary.fromSprite(a,!0),sprite:a})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(3),o=n(1),a=i.Sprite.define(o.SpriteID.DoorSheet,{imageSource:"../resources/door_sheet.png",height:r.GridCellSize,width:32,frameBorder:1}),s=i.Actor.define(o.ActorID.Win,{boundary:i.Boundary.fromSprite(a,!0),sprite:a}),c=!1,u=!1,l=0;s.onCreate(function(t){t.animation.depth=-10,t.visible=!1}),s.onStep(function(t){c?l++:u&&l--}),s.onDraw(function(t){t.drawSprite(a,t.x-l,t.y,0),t.drawSprite(a,t.x+32+l,t.y,1)}),s.onEvent(o.GameAction.Win,function(t,e){t.raiseEvent("open")}),s.onEvent("open",function(t,e){c=!0,setTimeout(function(){t.raiseEvent("close")},500)}),s.onEvent("close",function(t,e){c=!1,t.animation.depth=-100,setTimeout(function(){u=!0,setTimeout(function(){t.raiseEvent("home")},500)},500)}),s.onEvent("home",function(t,e){l=0,u=!1,setTimeout(function(){i.Vastgame.setRoom(o.RoomID.LevelSelect,{win:!0})},500)})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),r=n(3),o=n(1),a=n(6),s=n(11),c=i.Room.define(o.RoomID.Level);c.onStart(function(){var t=i.Actor.get(o.ActorID.Block),e=i.Actor.get(o.ActorID.ExitButton),n=i.Actor.get(o.ActorID.Player),u=i.Actor.get(o.ActorID.Wall),l=(i.Actor.get(o.ActorID.Win),i.Sprite.get(o.SpriteID.DoorSheet));s.SpriteFader.fadeIn([e.sprite,t.sprite,n.sprite,u.sprite,l]);var f=c.getInstances().find(function(t){return t.parent===n}),h=a.Registry.get(o.Settings.CanvasWidth),d=a.Registry.get(o.Settings.CanvasHeight),p=r.GridCellSize/4,g=c.defineView(0,0,h,d);g.follow(f,!0),g.attach(c.createActor(o.ActorID.ExitButton),h-r.GridCellSize-p,p);var v=c.defineGrid(r.GridCellSize);v.onClick(function(e){var n=e.getCell();if(!f.speed&&!n.getContents().some(function(t){return t.parent===u})){var r=n.getAdjacentCell(i.Enum.Direction.Left),a=n.getAdjacentCell(i.Enum.Direction.Right),s=n.getAdjacentCell(i.Enum.Direction.Down),c=r.getAdjacentCell(i.Enum.Direction.Down),l=a.getAdjacentCell(i.Enum.Direction.Down);n.containsInstanceOf(t)?f.raiseEvent(o.GameAction.Lift,{block:n.getContents()[0],targetCell:n}):a.containsInstance(f)?f.raiseEvent(o.GameAction.Move,{direction:i.Enum.Direction.Left,targetCell:n}):r.containsInstance(f)?f.raiseEvent(o.GameAction.Move,{direction:i.Enum.Direction.Right,targetCell:n}):c.containsInstance(f)&&(s.containsInstanceOf(t)||s.containsInstanceOf(u))?f.raiseEvent(o.GameAction.Jump,{direction:i.Enum.Direction.Right,targetCell:n}):l.containsInstance(f)&&(s.containsInstanceOf(t)||s.containsInstanceOf(u))&&f.raiseEvent(o.GameAction.Jump,{direction:i.Enum.Direction.Left,targetCell:n})}}),c.onKey(i.Enum.Key.Left,function(){var e=v.getCellAtPosition(f.x,f.y).getAdjacentCell(i.Enum.Direction.Left);e.getAdjacentCell(i.Enum.Direction.Up).isFree()&&(e.containsInstanceOf(u)||e.containsInstanceOf(t))?v.raiseClickEvent(f.x-r.GridCellSize,f.y-r.GridCellSize):e.isFree()&&v.raiseClickEvent(f.x-r.GridCellSize,f.y)}),c.onKey(i.Enum.Key.Right,function(){var e=v.getCellAtPosition(f.x,f.y).getAdjacentCell(i.Enum.Direction.Right);e.getAdjacentCell(i.Enum.Direction.Up).isFree()&&(e.containsInstanceOf(u)||e.containsInstanceOf(t))?v.raiseClickEvent(f.x+r.GridCellSize,f.y-r.GridCellSize):e.isFree()&&v.raiseClickEvent(f.x+r.GridCellSize,f.y)}),c.onKey(i.Enum.Key.Down,function(){var e=v.getCellAtPosition(f.x,f.y),n=e.getAdjacentCell(i.Enum.Direction.Left),o=e.getAdjacentCell(i.Enum.Direction.Right),a=e.getAdjacentCell(i.Enum.Direction.Up),s=a.getAdjacentCell(i.Enum.Direction.Left),c=a.getAdjacentCell(i.Enum.Direction.Right);a.containsInstanceOf(t)?v.raiseClickEvent(f.x,f.y-r.GridCellSize):(n.containsInstanceOf(t)&&s.isFree()&&v.raiseClickEvent(f.x-r.GridCellSize,f.y),o.containsInstanceOf(t)&&c.isFree()&&v.raiseClickEvent(f.x+r.GridCellSize,f.y))})})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,r,o,a,s,c,u=n(0),l=n(3),f=n(1),h=n(20),d=n(11),p=n(6),g=l.GridCellSize+16,v=u.Room.define(f.RoomID.LevelSelect),y=1,m=!1;v.onStart(function(t){o=p.Registry.get(f.Settings.CanvasWidth),r=p.Registry.get(f.Settings.CanvasHeight),console.log(y),v.setBackground(l.Black,o,r,l.Black),i=v.defineView(0,0,o,r);var e=Math.floor(o/g);a=Math.floor((o-e*g)/2),s=Math.floor(r/6);var n=!1,m=Math.ceil(h.Levels.count/e);s+m*g>r&&(e--,m=Math.ceil(h.Levels.count/e),c=Math.ceil((m*g-r)/g),n=!0);var b=Number(p.Registry.get(f.Settings.StackmoProgress));t&&t.win&&y===b&&(b++,p.Registry.set(f.Settings.StackmoProgress,b,!0));for(var E=0,I=0,k=0;k<h.Levels.count;k++){var R=v.createActor(f.ActorID.LevelIcon,a+I*g,s+E*g);R.levelNumber=k+1,R.enabled=k<b,++I===e&&(I=0,E++)}if(n){var x=v.createActor(f.ActorID.ScrollArrow);x.spriteAnimation.set(1),x.x=o-8-D.sprite.width,x.direction=u.Enum.Direction.Up;var P=v.createActor(f.ActorID.ScrollArrow);P.x=x.x,P.direction=u.Enum.Direction.Down}d.SpriteFader.fadeIn([C,w,S,A])});var C=u.Sprite.define(f.SpriteID.TextSheet,{imageSource:"../resources/text_sheet.png",height:32,width:320});v.onDraw(function(t){t.drawSprite(C,a,Math.floor(s/2-C.height),0)});var w=u.Sprite.define(f.SpriteID.Digits,{imageSource:"../resources/digits_32px.png",height:l.GridCellSize/2,width:l.GridCellSize/2}),S=u.Sprite.define(f.SpriteID.LevelIcon,{imageSource:"../resources/level_icon.png",width:l.GridCellSize,height:l.GridCellSize}),b=u.Actor.define(f.ActorID.LevelIcon,{boundary:u.Boundary.fromSprite(S),sprite:S});b.onClick(function(t){t.enabled&&!m&&(m=!0,d.SpriteFader.fadeOut([C,w,S,A],function(){var e=t.levelNumber,n=u.Room.get(f.RoomID.Level);h.LevelBuilder.populateRoom(n,e),y=e,u.Vastgame.setRoom(f.RoomID.Level),m=!1}))}),b.onDraw(function(t){if(t.enabled){var e=t.levelNumber,n=Math.floor((S.width-w.width)/2);if(e<10){var i=e;t.drawSprite(w,t.x+n,t.y+n,i)}else{var r=Math.floor(e/10),o=Math.floor(n/2)-3;t.drawSprite(w,t.x+o,t.y+n,r);var a=e%10,s=Math.floor(2*n)-3;t.drawSprite(w,t.x+s,t.y+n,a)}}});var A=u.Sprite.define(f.SpriteID.Arrows,{imageSource:"../resources/arrows.png",height:l.GridCellSize,width:l.GridCellSize}),D=u.Actor.define(f.ActorID.ScrollArrow,{boundary:u.Boundary.fromSprite(A),sprite:A});D.onClick(function(t,e){if(t.enabled){var n=t.direction;i.y+=n===u.Enum.Direction.Down?64:-64,i.y<0&&(i.y=0)}}),D.onStep(function(t){var e=t.direction===u.Enum.Direction.Up;t.y=e?s+i.y:r-82+i.y,t.enabled=e?i.y>0:i.y<(c+2)*g})},function(t,e,n){"use strict";function i(){h&&(h=!1,a.SpriteFader.fadeOut([l],function(){r.Vastgame.setRoom(o.RoomID.LevelSelect)}))}Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),o=n(1),a=n(11),s=n(6),c=0,u=0,l=r.Sprite.define(o.SpriteID.Title,{imageSource:"../resources/title.png",width:360,height:150}),f=r.Room.define(o.RoomID.Title),h=!0;f.onStart(function(){var t=s.Registry.get(o.Settings.CanvasWidth),e=s.Registry.get(o.Settings.CanvasHeight);c=Math.floor((t-360)/2),u=Math.floor((e-150)/4),a.SpriteFader.fadeIn([l])}),f.onDraw(function(t){t.drawSprite(l,c,u)}),f.onClick(i),f.onKey(r.Enum.Key.Any,i)},function(t,e,n){function i(t){return n(r(t))}function r(t){var e=o[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var o={"./actors/block":21,"./actors/block.ts":21,"./actors/hud":22,"./actors/hud.ts":22,"./actors/player":23,"./actors/player.ts":23,"./actors/wall":24,"./actors/wall.ts":24,"./actors/win":25,"./actors/win.ts":25,"./game":18,"./game.ts":18,"./rooms/level":26,"./rooms/level-select":27,"./rooms/level-select.ts":27,"./rooms/level.ts":26,"./rooms/title":28,"./rooms/title.ts":28,"./util/constants":3,"./util/constants.ts":3,"./util/enum":1,"./util/enum.ts":1,"./util/level-builder":20,"./util/level-builder.ts":20,"./util/registry":6,"./util/registry.ts":6,"./util/sprite-fader":11,"./util/sprite-fader.ts":11,"./util/util":19,"./util/util.ts":19};i.keys=function(){return Object.keys(o)},i.resolve=r,t.exports=i,i.id=29}]);